# Запуск проекта в Docker

Инструкция по развертыванию и запуску проекта ANRP в Docker-контейнерах.

## Предварительные требования

- Git
- Docker
- Docker Compose
- Node.js и npm (для сборки проекта)

## Шаги для запуска

### 1. Клонирование репозитория

```bash
git clone <URL_вашего_репозитория>
cd Tripzy
```

### 2. Настройка переменных окружения

Скопируйте файл с примером переменных окружения:

```bash
cp .env.example .env
```

Отредактируйте `.env` файл и укажите необходимые значения для вашего окружения.

### 3. Сборка проекта

```bash
npm run build
```

### 4. Запуск Docker-контейнеров

Запустите контейнеры в фоновом режиме:

```bash
docker-compose up --build -d
```

### 5. Подключение к контейнеру приложения

```bash
docker exec -it anrp_app /bin/sh
```

### 6. Инициализация базы данных

Внутри контейнера выполните команды для настройки базы данных:

```bash
npm run db:build
```

### 7. Применение миграций

```bash
npm run db:migrate
```

## Проверка работы

После выполнения всех шагов приложение должно быть доступно на порту, указанном в docker-compose.yml (по умолчанию 3000).

Проверьте логи контейнера:

```bash
docker logs anrp_app
```

## Полезные команды

### Остановка контейнеров

```bash
docker-compose down
```

### Перезапуск контейнеров

```bash
docker-compose restart
```

### Просмотр логов

```bash
docker-compose logs -f
```

### Просмотр запущенных контейнеров

```bash
docker-compose ps
```

## Troubleshooting

### Контейнер не запускается

Проверьте логи:
```bash
docker logs anrp_app
```

### Проблемы с базой данных

Убедитесь, что контейнер с БД запущен:
```bash
docker-compose ps
```

### Переменные окружения не применились

Пересоберите контейнеры:
```bash
docker-compose down
docker-compose up --build -d
```
